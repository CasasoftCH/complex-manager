jQuery(function(){"use strict";!function(t){function e(t,e){return t.substring(t.length-e.length,t.length)===e}function o(t){var e,o,n,a,r,c,i,l={},s=function(t){return decodeURIComponent(t).replace(/\+/g," ")},p=window.location.search.substring(1),u=/([^&;=]+)=?([^&;]*)/g;for(t&&(p=t),r=function(t){return"object"!=typeof t&&(o=t,t={},t.length=0,o&&Array.prototype.push.call(t,o)),t};n=u.exec(p);)e=n[1].indexOf("["),i=s(n[2]),0>e?(a=s(n[1]),l[a]?(l[a]=r(l[a]),Array.prototype.push.call(l[a],i)):l[a]=i):(a=s(n[1].slice(0,e)),c=s(n[1].slice(e+1,n[1].indexOf("]",e))),l[a]=r(l[a]),c?l[a][c]=i:Array.prototype.push.call(l[a],i));return l}function n(t){var e={};return t.rooms?"string"==typeof t.rooms?e.rooms=[t.rooms]:e.rooms=t.rooms:e.rooms=null,t.status?"string"==typeof t.status?e.status=[t.status]:e.status=t.status:e.status=null,e}function a(e,o){e=n(e),o.find("tr.complex-unit-header-row").each(function(o,n){var a=t(n).data("json"),r=!0;a&&a.number_of_rooms&&e.rooms&&(r=!1,console.log(e.rooms),t.each(e.rooms,function(t,e){e==a.number_of_rooms&&(r=!0)}));var c=!0;a&&a.status&&e.statuss&&(c=!1,console.log(e.statuss),t.each(e.statuss,function(t,e){e==a.status&&(c=!0)}));var c=!0;if(a.status&&e.status){var i=t.grep(e.status,function(t){return t==a.status});c=0===i.length?!1:!0}r&&c?(t(n).removeClass("filtered"),t(n).next().removeClass("filtered")):(t(n).addClass("filtered"),t(n).next().addClass("filtered"))})}function r(o,n){n="undefined"!=typeof n?n:0;var a="#"+o.prop("id");t(".complex-project-graphic-interaction a").each(function(o,n){e(t(n).attr("xlink:href"),a)&&t(n).attr("class",function(t,e){return e+" active"})}),t(".complex-custom-overlays img").not(".active").fadeOut(n),t('.complex-custom-overlays img[data-show-on-active-unit="'+a+'"]').addClass("active").fadeIn(n)}function c(o,n){if(n="undefined"!=typeof n?n:0,o.hasClass("active"));else{var a="#"+o.prop("id");t(".complex-project-graphic-interaction a").each(function(o,n){e(t(n).attr("xlink:href"),a)&&t(n).attr("class",function(t,e){return e.replace("active","")})}),t('.complex-custom-overlays img[data-show-on-active-unit="'+a+'"]').fadeOut(n)}}function i(e){t(".complex-project-graphic-interaction a").each(function(e,o){t(o).attr("class",function(t,e){return e.replace("active","")})}),e.hasClass("active")?(e.next().find(".detail-row-wrapper").slideUp("slow"),e.removeClass("active"),e.next().removeClass("active")):(l(e,p),t(".complex-unit-header-row.active").each(function(e,o){t(o).next().find(".detail-row-wrapper").slideUp("slow"),t(o).removeClass("active"),t(o).next().removeClass("active")}),e.next().find(".detail-row-wrapper").slideDown("slow"),e.addClass("active"),e.next().addClass("active"),r(e))}function l(e,o){o="undefined"!=typeof o?o:0;var n=e;t(".complex-unit-detail-row.active").length&&t(".complex-unit-detail-row.active").offset().top<n.offset().top?t("html, body").animate({scrollTop:n.offset().top-t(".complex-unit-detail-row.active").outerHeight()-o},500):t("html, body").animate({scrollTop:n.offset().top-o},500)}function s(e){e.on("submit",function(o){o.preventDefault(),t(this).find(":input").prop("disabled",!1),t("#complexContactFormLoader").length||e.append('<div id="complexContactFormLoader"><i class="fa fa-circle-o-notch fa-spin"></i></div>'),t("#complexContactFormLoader").fadeIn("slow");var n=e.serialize();t.post(e.prop("action"),n,function(e){var o=t(e).find(".complex-contact-form-wrapper");t(".complex-contact-form-wrapper").html(o.html()),s(t("#complexContactFormAnchor"))})})}var p=124;t(".complex-list-wrapper #complexContactForm").hide(),t(".complex-project-graphic img").load(function(){t(".complex-project-graphic-interaction").height(t(".complex-project-graphic img").height())}),t(".complex-unit-detail-row .detail-row-wrapper").slideUp(0),s(t("#complexContactFormAnchor"));var u=!1;t("body").on("touchmove",function(){u=!0}),t("body").on("touchstart",function(){u=!1}),t(".complex-unit-header-row").on("click touchend",function(e){e.preventDefault(),u||(t(".complex-custom-overlays img").removeClass("active").hide(),i(t(this)))}),t(".complex-unit-header-row").hover(function(){r(t(this))},function(){c(t(this))});var m=t(location).attr("href").replace(/^.*?(#|$)/,"");m&&t("#"+m).length&&t("#"+m).click(),t(".complex-project-graphic-interaction a").on("click touchend",function(e){e.preventDefault();var o=t(this).attr("xlink:href"),n=o.indexOf("#"),a=-1!==n?o.substring(n+1):"";t("#"+a).length&&t("#"+a).click()}).hover(function(){var e=t(this).attr("xlink:href"),o=e.indexOf("#"),n=-1!==o?e.substring(o+1):"";t("#"+n).length&&r(t("#"+n))},function(){var e=t(this).attr("xlink:href"),o=e.indexOf("#"),n=-1!==o?e.substring(o+1):"";t("#"+n).length&&c(t("#"+n))}),t(".complex-call-contact-form").click(function(e){e.preventDefault();var o=t(this).data("unit-id");t('#complexContactForm form [name="complex-unit-inquiry[unit_id]"]').val(o).prop("disabled","disabled"),t("#complexContactForm").appendTo(t(this).parent()),t("#complexContactForm").slideUp(0),t("#complexContactForm").slideDown("slow"),t(".complex-sendback-contact-form").show(),t("html, body").animate({scrollTop:t("#complexContactForm").offset().top-p},500),t(this).hide()}),t(".complex-sendback-contact-form").click(function(e){e.preventDefault(),t("#complexContactForm").slideUp("slow"),t(".complex-call-contact-form").show()});var f=o();a(f,t(".complex-list-wrapper")),t("#complexFilterForm").change(function(e){var n=t("#complexFilterForm").serialize();n=n.replace(/%5B/g,"["),n=n.replace(/%5D/g,"]"),f=o(n),console.log(n),a(f,t(".complex-list-wrapper"))})}(jQuery)});